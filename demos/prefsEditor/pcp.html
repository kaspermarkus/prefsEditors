<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>PCP</title>

    <!-- The needed infusion CSS files -->
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/fss/css/fss-reset-global.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/fss/css/fss-base-global.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/fss/css/fss-layout.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/fss/css/fss-text.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/preferences/css/fss/fss-text-prefsEditor.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/preferences/css/fss/fss-theme-bw-prefsEditor.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/preferences/css/fss/fss-theme-wb-prefsEditor.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/preferences/css/fss/fss-theme-lgdg-prefsEditor.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/preferences/css/fss/fss-theme-dglg-prefsEditor.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/preferences/css/fss/fss-theme-yb-prefsEditor.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/preferences/css/fss/fss-theme-by-prefsEditor.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/preferences/css/PrefsEditor.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/lib/infusion/framework/preferences/css/FullPrefsEditor.css" />

    <!-- Needed fonts from Google -->
    <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>

    <!-- All styling for PMT is here -->
    <link rel="stylesheet" type="text/css" href="../../src/shared/adjusters/css/fss-theme-inverted-prefsEditor.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/adjusters/css/adjusters.css" />
    <link rel="stylesheet" type="text/css" href="../../src/shared/frames/css/frames.css" />

    <!-- This is breaking the slider color -->
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/combobox.js"></script>

    <!-- The Infusion Library -->
    <script type="text/javascript" src="../../src/shared/lib/infusion/infusion-prefsFramework.js"></script>

    <!-- The common JS files -->
    <script type="text/javascript" src="../../src/shared/common/ariaUtility.js"></script>
    <script type="text/javascript" src="../../src/shared/common/eventUtility.js"></script>
    <script type="text/javascript" src="../../src/shared/common/merging.js"></script>
    <script type="text/javascript" src="../../src/shared/common/OSDetection.js"></script>

    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/activatableLabelsClickOnActivate.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/singleSelectionWithKeyboard.js"></script>

    <script type="text/javascript" src="../../src/shared/frames/js/GPIIPrefsEditor.js"></script>

    <!-- The custom adjusters JS files -->
    <script type="text/javascript" src="../../src/shared/components/preview/js/preview.js"></script>
    <script type="text/javascript" src="../../src/shared/components/textfieldStepper/js/textfieldStepper.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/expandingAdjusters.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/textfieldStepper.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/onOffSwitch.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/iconCheck.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/addContrast.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/contrastThemeNoPreview.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/contrastEnabled.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/increaseSizePCP.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/increaseSizePMT.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/textSizePCP.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/textSizePMT.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/cursorSizePCP.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/cursorSizePMT.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/magnifierEnabled.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/magnifierPCP.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/magnifierPMT.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/magnifierInvertColours.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/magnifierPosition.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/followingElement.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/magnifierFollowsFollowingElement.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/screenReaderFollowsFollowingElement.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/showCrosshairs.js"></script>

    <!-- The JS files of the enactors of my custom adjusters -->
    <script type="text/javascript" src="../../src/shared/enactors/js/contrastThemeNoPreview.js"></script>
    <script type="text/javascript" src="../../src/shared/enactors/js/textSize.js"></script>
    <script type="text/javascript" src="../../src/shared/enactors/js/cursorSize.js"></script>
    <script type="text/javascript" src="../../src/shared/enactors/js/magnifier.js"></script>

    <!-- The i18n JS files -->
    <script type="text/javascript" src="../../src/shared/i18n/js/i18n.js"></script>

    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/Panels.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/applicationTerms/Panels.js"></script>

    <!-- PMT-specific files -->
    <script type="text/javascript" src="../../src/shared/schemas/js/primarySchema.js"></script>
    <script type="text/javascript" src="../../src/shared/schemas/js/commonTermsAuxSchemaData.js"></script>
    <script type="text/javascript" src="../../src/shared/schemas/js/applicationTermsAuxSchemaData.js"></script>
    <script type="text/javascript" src="../../src/shared/schemas/js/pcpSchema.js"></script>
    <script type="text/javascript" src="../../src/shared/common/GpiiSession.js"></script>
    <script type="text/javascript" src="../../src/shared/common/GpiiStore.js"></script>

    <!-- Socket.io-client library -->
    <script type="text/javascript" src="../../src/shared/lib/socket.io/socket.io.js"></script>

    <!-- PCPteam-specific files -->
    <script type="text/javascript" src="../../src/pcp/js/prefsEditor.js"></script>
    <script type="text/javascript" src="../../src/pcp/js/socket.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/languageCollectivePanel.js"></script>
    <script type="text/javascript" src="../../src/pcp/js/visualAlternativesCollectivePanel.js"></script>
    <script type="text/javascript" src="../../src/shared/adjusters/js/commonTerms/volumeCollectivePanel.js"></script>

    <script type="text/javascript" src="../../src/pcp/js/starter.js"></script>

    <!-- The demo script -->
    <script type="text/javascript" src="demo.js"></script>

</head>
<body>
    <!-- This is the div that will contain the UI Options component -->
    <div id="gpiic-pcp">
    </div>

    <script>
        var socket = io.connect("http://localhost:8081/pcp");
        var pcp = gpii.pcp.starter();
        socket.on("connect", function () {
            socket.emit("message", {}, fluid.log);
        });

        socket.on("message", function (data) {
            console.log("RECEIVED MESSAGE2 "+JSON.stringify(data));
            if (data.settings) {
                document.getElementById("gpiic-pcp").innerHTML = "";
                pcp.renderAdjusters(data.settings);
            };
            gpii.pcp.onPrefsEditorReady = function () {
                console.log("the prefs editor becomes ready")
                if (data.messages) {
                    console.log("there are some messages");
                    fluid.each(data.messages, function (message) {
                        pcp.showMessage(message);
                    });
                };
            };
            //QUESTIONS FOR ALEX:
            // what is gpii.pcp.onPrefsEditorReady for?
            // why dont I get a cancel link?
            // why is the cancel link disappearing?
            // does this just update the adjuster: pcp.renderAdjusters?
            // Is there no top-level indicator for the application specific settings?
            // Where is things submitted back to the flowmanager?
        });
    </script>

</body>
</html>
